{% macro card(title, collapsed=False) %}
<div class="card{% if collapsed %} collapsed{% endif %}">
  <div class="card-header" onclick="toggleCard(this)">
    <h2>{{ title|safe }}</h2>
    <span class="toggle-icon">â–¼</span>
  </div>
  <div class="card-content">
    {{ caller() }}
  </div>
</div>
{% endmacro %}

{% macro format_prayer(prayer_obj) %}
{% if prayer_obj.display_title %}
<p class="subheader"><strong>{{ prayer_obj.prayer_title }}</strong></p>
{% endif %}
<p>
  <strong>{{ prayer_obj.prayer | replace('\n', '<br />') | safe }}</strong>
  {% if prayer_obj.reference %}
    <span class="versicle-ref">{{ prayer_obj.reference }}</span>
  {% endif %}
</p>
{% endmacro %}

{% macro personal_prayers_toggle(all_personal_prayers) %}
{% if current_user.is_authenticated and all_personal_prayers %}
<button class="button" onclick="document.getElementById('personal-prayers-list').classList.toggle('hidden')">Show/Hide My Personal Prayers</button>
<div id="personal-prayers-list" class="hidden" style="margin-top: 10px;">
  <p class="subheader"><strong>My Personal Prayers</strong></p>
  {% for category, prayers in all_personal_prayers.items() %}
    {% if prayers %}
      <p><strong>{{ category }}</strong></p>
      <ul>
        {% for prayer in prayers %}
        <li>{{ prayer.text }}</li>
        {% endfor %}
      </ul>
    {% endif %}
  {% endfor %}
</div>
{% endif %}
{% endmacro %}
