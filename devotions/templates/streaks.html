{% extends "base.html" %}
{% block title %}Prayer Streaks{% endblock %}
{% block content %}
<div class="page-header">
  <h1>Prayer Journey</h1>
  <p>Track your consistency and celebrate your spiritual discipline.</p>
</div>

<div class="card">
    <div style="text-align: center; margin-bottom: 30px;">
        <div style="font-size: 4em; margin-bottom: 10px;">
            {% if prayed_today %}ğŸ”¥{% else %}ğŸ•¯ï¸{% endif %}
        </div>
        <h2 style="border-bottom: none; font-size: 2.5em; margin: 0; color: #e67e22;">{{ current_streak }} Days</h2>
        <p style="color: #7f8c8d; margin-top: 5px;">Current Streak</p>
        
        {% if prayed_today %}
            <p style="color: #27ae60; font-weight: bold;">You have prayed today! Keep it up!</p>
            {% if devotions_today_count > 0 %}
                <p style="color: #555; margin-top: 5px;">Devotions completed today: <strong>{{ devotions_today_count }}</strong></p>
            {% endif %}
        {% else %}
            <p style="color: #e74c3c;">You haven't recorded a prayer yet today.</p>
            <p style="margin-bottom: 20px;">Keep your streak alive by praying <strong>{{ recommended_devotion.name }}</strong> now.</p>
            <a href="{{ recommended_devotion.url }}" class="button" style="background-color: #2980b9;">Go to {{ recommended_devotion.name }}</a>
        {% endif %}
    </div>

    <div style="margin-bottom: 20px;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 0.9em; color: #555;">
            <span>Next Milestone: {{ next_milestone }} Days</span>
            <span>{{ progress_percent|round|int }}%</span>
        </div>
        <div style="background-color: #eee; border-radius: 10px; height: 15px; overflow: hidden;">
            <div style="background-color: #e67e22; width: {{ progress_percent }}%; height: 100%; transition: width 1s ease-in-out;"></div>
        </div>
    </div>
</div>

<div class="card">
    <div style="text-align: center; margin-bottom: 30px;">
        <div style="font-size: 4em; margin-bottom: 10px;">
            {% if read_bible_today %}ğŸ“–{% else %}ğŸ“•{% endif %}
        </div>
        <h2 style="border-bottom: none; font-size: 2.5em; margin: 0; color: #27ae60;">{{ bible_streak }} Days</h2>
        <p style="color: #7f8c8d; margin-top: 5px;">Bible Reading Streak</p>

        {% if read_bible_today %}
            <p style="color: #27ae60; font-weight: bold;">You have read the Bible today! Excellent!</p>
        {% else %}
            <p style="color: #e74c3c;">You haven't marked your reading complete today.</p>
            <p style="margin-bottom: 20px;">Continue your journey through the Word.</p>
            <a href="/bible_in_a_year" class="button" style="background-color: #2980b9;">Go to Bible Reading</a>
        {% endif %}
    </div>
</div>

<div class="card">
    <h2>Achievements</h2>
    {% if achievements %}
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; margin-top: 20px;">
            {% for ach in achievements %}
            <div style="border: 1px solid #ddd; border-radius: 8px; padding: 15px; text-align: center; background-color: #fcfcfc;">
                <div style="font-size: 2.5em; margin-bottom: 10px;">{{ ach.icon }}</div>
                <div style="font-weight: bold; color: #333; font-size: 0.9em;">{{ ach.title }}</div>
                <div style="font-size: 0.8em; color: #7f8c8d; margin-top: 5px;">{{ ach.date }}</div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p style="text-align: center; color: #7f8c8d; font-style: italic; margin: 30px 0;">
            No achievements yet. Keep praying daily to unlock them!
        </p>
        <div style="text-align: center; opacity: 0.5;">
            <div style="font-size: 3em; filter: grayscale(100%);">ğŸ†</div>
            <p>Your trophy case is waiting.</p>
        </div>
    {% endif %}
</div>
{% endblock %}
