{% extends "base.html" %}
{% import "_macros.html" as macros %}

{% block title %}Psalms by Category{% endblock %}

{% block content %}
    <div class="page-header">
      <h1>Psalms by Category</h1>
      <p>Select a category to view a Psalm and prayer for reflection.</p>
    </div>

    {% for cat in category_data %}
      {% set i = loop.index0 %}
      {% call macros.card(cat.title, collapsed=True) %}
        <p><em>{{ cat.description }}</em></p>
        <hr>
        <span class="ref" id="ref-{{ i }}">{{ cat.initial_ref }}</span>
        <p id="text-{{ i }}">{{ cat.initial_text|safe }}</p>
        <button class="button picker-toggle-button" onclick="togglePicker(this, {{ i }})">Select Psalm</button>
        <div id="picker-{{ i }}" class="item-picker">
            {% for p in cat.verses %}
            <button class="button picker-select-button" onclick="selectRef('{{ p }}', {{ i }})">{{ p }}</button>
            {% endfor %}
        </div>
        <hr>
        <p class="subheader"><strong>Prayer</strong></p>
        <p>{{ cat.prayer }}</p>
      {% endcall %}
    {% endfor %}
{% endblock %}
